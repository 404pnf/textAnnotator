(function(){var l,m=this;
function n(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"array"==n(a)}function aa(a){var b=n(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function u(a){return a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function v(a,b,c){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return v.apply(null,arguments)}
function w(a,b){var c=a.split("."),d=m;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?d=d[f]?d[f]:d[f]={}:d[f]=b}function x(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c};function ga(a){if(!ha.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(ia,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(ja,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(ka,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(la,"\x26quot;"));return a}var ia=/&/g,ja=/</g,ka=/>/g,la=/\"/g,ha=/[&<>\"]/;var y=Array.prototype,z=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},ma=y.filter?function(a,b,c){return y.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,e=t(a)?
a.split(""):a,h=0;h<d;h++)if(h in e){var k=e[h];b.call(c,k,h,a)&&(f[g++]=k)}return f};function na(a,b){var c=z(a,b),d;(d=0<=c)&&y.splice.call(a,c,1);return d}function oa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function pa(a,b,c){return 2>=arguments.length?y.slice.call(a,b):y.slice.call(a,b,c)};var B,qa,ra,sa;function ta(){return m.navigator?m.navigator.userAgent:null}sa=ra=qa=B=!1;var C;if(C=ta()){var ua=m.navigator;B=0==C.lastIndexOf("Opera",0);qa=!B&&(-1!=C.indexOf("MSIE")||-1!=C.indexOf("Trident"));ra=!B&&-1!=C.indexOf("WebKit");sa=!B&&!ra&&!qa&&"Gecko"==ua.product}var D=B,E=qa,F=sa,G=ra,va=m.navigator,wa=-1!=(va&&va.platform||"").indexOf("Mac");function xa(){var a=m.document;return a?a.documentMode:void 0}var ya;
a:{var za="",H;if(D&&m.opera)var Aa=m.opera.version,za="function"==typeof Aa?Aa():Aa;else if(F?H=/rv\:([^\);]+)(\)|;)/:E?H=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:G&&(H=/WebKit\/(\S+)/),H)var Ba=H.exec(ta()),za=Ba?Ba[1]:"";if(E){var Ca=xa();if(Ca>parseFloat(za)){ya=String(Ca);break a}}ya=za}var Da={};
function I(a){var b;if(!(b=Da[a])){b=0;for(var c=String(ya).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var e=c[g]||"",h=d[g]||"",k=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var s=k.exec(e)||["","",""],q=p.exec(h)||["","",""];if(0==s[0].length&&0==q[0].length)break;b=((0==s[1].length?0:parseInt(s[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==s[1].length?0:parseInt(s[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==s[2].length)<(0==q[2].length)?-1:(0==s[2].length)>(0==q[2].length)?1:0)||(s[2]<q[2]?-1:s[2]>q[2]?1:0)}while(0==b)}b=Da[a]=0<=b}return b}var Ea=m.document,J=Ea&&E?xa()||("CSS1Compat"==Ea.compatMode?parseInt(ya,10):5):void 0;var Fa,Ga=!E||E&&9<=J;!F&&!E||E&&E&&9<=J||F&&I("1.9.1");E&&I("9");function Ha(a){a=a.className;return t(a)&&a.match(/\S+/g)||[]}function Ia(a,b){for(var c=Ha(a),d=pa(arguments,1),f=c.length+d.length,g=c,e=0;e<d.length;e++)0<=z(g,d[e])||g.push(d[e]);a.className=c.join(" ");return c.length==f}function Ja(a,b){var c=Ha(a),d=pa(arguments,1),c=Ka(c,d);a.className=c.join(" ")}function Ka(a,b){return ma(a,function(a){return!(0<=z(b,a))})}function La(a,b,c){c?Ia(a,b):Ja(a,b)};function Ma(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}Ma.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Na(a,b){this.width=a;this.height=b}Na.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};function Oa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Pa(a){var b={},c;for(c in a)b[c]=a[c];return b}var Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Qa.length;g++)c=Qa[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ra(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,e;e=c[g];g++)a==e.nodeName&&(d[f++]=e);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;e=c[g];g++)a=e.className,"function"==typeof a.split&&0<=z(a.split(/\s+/),b)&&(d[f++]=e);d.length=f;return d}return c}
function Sa(a,b){Oa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ta?a.setAttribute(Ta[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ta={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function L(a,b,c){var d=arguments,f=document,g=d[0],e=d[1];if(!Ga&&e&&(e.name||e.type)){g=["\x3c",g];e.name&&g.push(' name\x3d"',ga(e.name),'"');if(e.type){g.push(' type\x3d"',ga(e.type),'"');var h={};K(h,e);delete h.type;e=h}g.push("\x3e");g=g.join("")}g=f.createElement(g);e&&(t(e)?g.className=e:r(e)?Ia.apply(null,[g].concat(e)):Sa(g,e));2<d.length&&Ua(f,g,d);return g}
function Ua(a,b,c){function d(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var g=c[f];if(!aa(g)||ba(g)&&0<g.nodeType)d(g);else{var e;a:{if(g&&"number"==typeof g.length){if(ba(g)){e="function"==typeof g.item||"string"==typeof g.item;break a}if("function"==n(g)){e="function"==typeof g.item;break a}}e=!1}A(e?oa(g):g,d)}}}function Va(a,b){a.appendChild(b)}function Wa(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function M(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function N(a){this.e=a||m.document||document}N.prototype.createElement=function(a){return this.e.createElement(a)};N.prototype.createTextNode=function(a){return this.e.createTextNode(String(a))};N.prototype.appendChild=Va;function Xa(a,b){return a.replace(/{([0-9a-zA-Z]+)}/g,function(a,d){return"undefined"!=typeof b[d]?b[d]:a})}var Ya={},Za={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.bottom-0.1*a.height}}},$a={g:function(a){return{width:a.width,height:a.height,left:a.left,top:a.top}}},ab={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.top+(a.height-b)/2}}};
function bb(){if(null!=window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var a=window.document;return"CSS1Compat"===document.compatMode?{x:a.documentElement.scrollLeft,y:a.documentElement.scrollTop}:{x:a.body.scrollLeft,y:a.body.scrollTop}};var cb=null,db=F||G||D||"function"==typeof m.atob;function eb(){};function O(a,b){this.content=a;this.width=b}x(O,eb);w("tvs.ImageTemplatePart",O);O.prototype.f=function(a){return Xa(this.content,[a])};
function fb(a,b,c,d,f,g,e,h){var k=!1,p=a.width.split(" ");switch(p[0]){case "*":b.style.width=h+"%";break;case "repeat":b.style.width="auto";Va(b,L("div"));break;case "height":b.style.width=d.height+"px";b.style.maxWidth=b.style.width;break;case "swag":if(!c)throw Error("Swag part can not be the first");b.style.display="none";h=L("img");p[1]&&(h.style.display="none",h.onload=function(){this.style.height=d.height/+p[1]*this.height;this.style.display=""});h.src=a.f(e);h.style.left=100*f/g+"%";c.appendChild(h);
k=!0;break;case "stretch":h=L("img");h.src=a.f(e);b.appendChild(h);h.removeAttribute("width");h.removeAttribute("height");k=!0;break;default:b.style.width="number"==typeof a.width?a.width+"px":a.width}k||(b.style.backgroundImage='url("'+a.f(e)+'")',b.style.backgroundSize="auto 100%")}O.prototype.t=function(){};function P(a,b,c,d){a=Xa('\x3csvg width\x3d"{0}" height\x3d"{1}" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg\x3e\n{2}\n\x3c/g\x3e\n\x3c/svg\x3e',[b,c,a]);O.call(this,a,d);this.D=b;this.C=c}x(P,O);w("tvs.SvgTemplatePart",P);
P.prototype.f=function(a){var b=Xa(this.content,[a]);if(db)a=m.btoa(b);else{a=[];for(var c=0,d=0;d<b.length;d++){for(var f=b.charCodeAt(d);255<f;)a[c++]=f&255,f>>=8;a[c++]=f}if(!aa(a))throw Error("encodeByteArray takes an array as a parameter");if(!cb)for(cb={},b=0;65>b;b++)cb[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(b);b=cb;c=[];for(d=0;d<a.length;d+=3){var g=a[d],e=(f=d+1<a.length)?a[d+1]:0,h=d+2<a.length,k=h?a[d+2]:0,p=g>>2,g=(g&3)<<4|e>>4,e=(e&15)<<2|k>>
6,k=k&63;h||(k=64,f||(e=64));c.push(b[p],b[g],b[e],b[k])}a=c.join("")}return"data:image/svg+xml;base64,"+a};
P.prototype.t=function(a,b){if("stretch"===this.width){var c,d=M(a),f=Q(a,"position"),g=F&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==f&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),e=new Ma(0,0),h;c=d?M(d):document;(h=!E)||(h=E&&9<=J)||(h="CSS1Compat"==(c?new N(M(c)):Fa||(Fa=new N)).e.compatMode);h=h?c.documentElement:c.body;if(a!=h)if(a.getBoundingClientRect)c=gb(a),f=(d?new N(M(d)):Fa||(Fa=new N)).e,d=G||"CSS1Compat"!=f.compatMode?f.body:f.documentElement,f=f.parentWindow||
f.defaultView,d=E&&I("10")&&f.pageYOffset!=d.scrollTop?new Ma(d.scrollLeft,d.scrollTop):new Ma(f.pageXOffset||d.scrollLeft,f.pageYOffset||d.scrollTop),e.x=c.left+d.x,e.y=c.top+d.y;else if(d.getBoxObjectFor&&!g)c=d.getBoxObjectFor(a),d=d.getBoxObjectFor(h),e.x=c.screenX-d.screenX,e.y=c.screenY-d.screenY;else{c=a;do{e.x+=c.offsetLeft;e.y+=c.offsetTop;c!=a&&(e.x+=c.clientLeft||0,e.y+=c.clientTop||0);if(G&&"fixed"==Q(c,"position")){e.x+=d.body.scrollLeft;e.y+=d.body.scrollTop;break}c=c.offsetParent}while(c&&
c!=a);if(D||G&&"absolute"==f)e.y-=d.body.offsetTop;for(c=a;(c=hb(c))&&c!=d.body&&c!=h;)e.x-=c.scrollLeft,D&&"TR"==c.tagName||(e.y-=c.scrollTop)}e=ib;"none"!=Q(a,"display")?e(a):(c=a.style,d=c.display,f=c.visibility,g=c.position,c.visibility="hidden",c.position="absolute",c.display="inline",e(a),c.display=d,c.position=g,c.visibility=f);e=Ra("img",null,a)[0];e.style.transform="scaleX("+b.width/this.D+") scaleY("+b.height/this.C+")";e.style.webkitTransform=e.style.msTransform=e.style.transform}};function R(a){this.v=t(a)?[new O(a,"repeat")]:r(a)?a:[a]}w("tvs.Template",R);var S={squiggly:new R(new P('\x3cline y2\x3d"16.00" x2\x3d"20" y1\x3d"4.00" x1\x3d"10" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4.00" x2\x3d"10" y1\x3d"16.00" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),solid:new R(new P('\x3cline y2\x3d"5" x2\x3d"20" y1\x3d"5" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),dotted:new R(new P('\x3cline y2\x3d"3" x2\x3d"4" y1\x3d"3" x1\x3d"0" stroke-dasharray\x3d"2, 2" stroke-width\x3d"2" stroke\x3d"{0}" fill\x3d"none"/\x3e',
4,5,"repeat")),dashed:new R(new P('\x3cline y2\x3d"5" x2\x3d"20" y1\x3d"5" x1\x3d"0" stroke-dasharray\x3d"10, 10" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),"double":new R(new P('\x3cline y2\x3d"1" x2\x3d"5" y1\x3d"1" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4" x2\x3d"5" y1\x3d"4" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e',5,5,"repeat")),combined:new R([new P('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',
10,10,"height"),new P('\x3cline y2\x3d"5" x2\x3d"10" y1\x3d"5" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}"/\x3e',10,10,"repeat"),new P('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',10,10,"height")])};w("tvs.AnnotatorDictionary.svgTemplates",S);function jb(){0!=kb&&(this.Y=Error().stack,u(this))}var kb=0;var lb=!E||E&&9<=J,mb=E&&!I("9");!G||I("528");F&&I("1.9b")||E&&I("8")||D&&I("9.5")||G&&I("528");F&&!I("8")||E&&I("9");function T(a,b){this.type=a;this.currentTarget=this.target=b}T.prototype.k=!1;T.prototype.defaultPrevented=!1;T.prototype.P=!0;T.prototype.preventDefault=function(){this.defaultPrevented=!0;this.P=!1};function nb(a){nb[" "](a);return a}nb[" "]=function(){};function U(a,b){a&&this.init(a,b)}x(U,T);l=U.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.N=!1;l.o=null;
l.init=function(a,b){var c=this.type=a.type;T.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(F){var f;a:{try{nb(d.nodeName);f=!0;break a}catch(g){}f=!1}f||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=G||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=G||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.N=wa?a.metaKey:a.ctrlKey;this.state=a.state;this.o=a;a.defaultPrevented&&this.preventDefault();delete this.k};
l.preventDefault=function(){U.U.preventDefault.call(this);var a=this.o;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,mb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var ob="closure_listenable_"+(1E6*Math.random()|0),pb=0;function qb(a,b,c,d,f,g){this.c=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.i=g;this.key=++pb;this.d=this.h=!1}function rb(a){a.d=!0;a.c=null;a.proxy=null;a.src=null;a.i=null};var sb={},V={},W={},X={};
function tb(a,b,c,d,f){if(r(b))for(var g=0;g<b.length;g++)tb(a,b[g],c,d,f);else if(c=ub(c),a&&a[ob])a.F.add(b,c,!1,d,f);else a:{if(!b)throw Error("Invalid event type");d=!!d;var e=V;b in e||(e[b]={b:0});e=e[b];d in e||(e[d]={b:0},e.b++);var e=e[d],g=u(a),h;if(e[g]){h=e[g];for(var k=0;k<h.length;k++)if(e=h[k],e.c==c&&e.i==f){if(e.d)break;h[k].h=!1;break a}}else h=e[g]=[],e.b++;k=vb();e=new qb(c,k,a,b,d,f);e.h=!1;k.src=a;k.c=e;h.push(e);W[g]||(W[g]=[]);W[g].push(e);a.addEventListener?a.addEventListener(b,
k,d):a.attachEvent(b in X?X[b]:X[b]="on"+b,k);sb[e.key]=e}}function vb(){var a=wb,b=lb?function(c){return a.call(b.src,b.c,c)}:function(c){c=a.call(b.src,b.c,c);if(!c)return c};return b}function xb(a,b,c){var d=1;b=u(b);if(a[b])for(a=oa(a[b]),b=0;b<a.length;b++){var f=a[b];f&&!f.d&&(d&=!1!==yb(f,c))}return Boolean(d)}
function yb(a,b){var c=a.c,d=a.i||a.src;if(a.h&&"number"!=typeof a&&a&&!a.d){var f=a.src;if(f&&f[ob]){var g=f.F,e=a.type;e in g.j&&na(g.j[e],a)&&(rb(a),0==g.j[e].length&&(delete g.j[e],g.Z--))}else{var g=a.type,h=a.proxy,e=a.capture;f.removeEventListener?f.removeEventListener(g,h,e):f.detachEvent&&f.detachEvent(g in X?X[g]:X[g]="on"+g,h);f=u(f);W[f]&&(h=W[f],na(h,a),0==h.length&&delete W[f]);rb(a);if(h=V[g][e][f])na(h,a),0==h.length&&(delete V[g][e][f],V[g][e].b--),0==V[g][e].b&&(delete V[g][e],V[g].b--),
0==V[g].b&&delete V[g];delete sb[a.key]}}return c.call(d,b)}
function wb(a,b){if(a.d)return!0;var c=a.type,d=V;if(!(c in d))return!0;var d=d[c],f,g;if(!lb){if(!(c=b))a:{for(var c=["window","event"],e=m;f=c.shift();)if(null!=e[f])e=e[f];else{c=null;break a}c=e}f=c;c=!0 in d;e=!1 in d;if(c){if(0>f.keyCode||void 0!=f.returnValue)return!0;a:{var h=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==f.returnValue)f.returnValue=!0}}h=new U;h.init(f,this);f=!0;try{if(c){for(var p=[],s=h.currentTarget;s;s=s.parentNode)p.push(s);g=d[!0];for(var q=
p.length-1;!h.k&&0<=q;q--)h.currentTarget=p[q],f&=xb(g,p[q],h);if(e)for(g=d[!1],q=0;!h.k&&q<p.length;q++)h.currentTarget=p[q],f&=xb(g,p[q],h)}else f=yb(a,h)}finally{p&&(p.length=0)}return f}d=new U(b,this);return f=yb(a,d)}var zb="__closure_events_fn_"+(1E9*Math.random()>>>0);function ub(a){return"function"==n(a)?a:a[zb]||(a[zb]=function(b){return a.handleEvent(b)})};function Ab(a,b,c){jb.call(this);this.L=a;this.K=b;this.H=c;this.B=v(this.M,this)}x(Ab,jb);l=Ab.prototype;l.m=!1;l.q=0;l.n=null;l.fire=function(){this.n||this.q?this.m=!0:Bb(this)};l.M=function(){this.n=null;this.m&&!this.q&&(this.m=!1,Bb(this))};function Bb(a){var b;b=a.B;var c=a.K;if("function"!=n(b))if(b&&"function"==typeof b.handleEvent)b=v(b.handleEvent,b);else throw Error("Invalid listener argument");b=2147483647<c?-1:m.setTimeout(b,c||0);a.n=b;a.L.call(a.H)};function Q(a,b){var c;a:{c=M(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function gb(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function hb(a){if(E&&!(E&&8<=J))return a.offsetParent;var b=M(a),c=Q(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Q(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function ib(a){var b=a.offsetWidth,c=a.offsetHeight,d=G&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=gb(a),new Na(a.right-a.left,a.bottom-a.top)):new Na(b,c)};function Y(a,b,c,d){this.id=a||"annotator";this.r=c;this.V=b;this.options={height:5};K(this.options,d||this.options);this.w=new Ab(v(this.O,this),50);a=this.id;b=v(this.w.fire,this.w);"undefined"===typeof Ya[a]&&(Ya[a]=b,tb(window,"resize",b))}Y.prototype.O=function(){var a;a="tvs-"+this.id;var b=document;a=b.querySelectorAll&&b.querySelector?b.querySelectorAll("."+a):b.getElementsByClassName?b.getElementsByClassName(a):Ra("*",a,void 0);b=v(this.s,this);A(a,b)};
Y.prototype.s=function(a){a.target&&(a=a.srcElement);var b=a["_"+this.id+"_info"];if(b){var c=document.body;a=a.getClientRects();for(var d=Math.min(a.length,b.a.length),f=this.V[b.type],g=bb().y,e=0;e<d;e++){var h=Pa(a[e]);h.top+=g;h.bottom+=g;"undefined"===typeof h.width&&(h.width=h.right-h.left,h.height=h.bottom-h.top);var h=this.r.g(h,this.options.height),k=b.a[e].style;k.width=h.width+"px";k.left=h.left+"px";k.top=h.top+"px";Cb(f,b.a[e],h)}for(e=d;e<b.a.length;e++)Wa(b.a[e]);for(e=b.a.length=
d;e<a.length;e++){h=Pa(a[e]);h.top+=g;h.bottom+=g;"undefined"===typeof h.width&&(h.width=h.right-h.left,h.height=h.bottom-h.top);d=L("div");d.style.position="absolute";var k=L("div"),h=this.r.g(h,this.options.height),p=Db(f,b.color,h);k.appendChild(p);d.style.height=k.style.height=h.height+"px";d.style.width=0;k.style.width=h.width+"px";d.style.left=h.left+"px";d.style.top=h.top+"px";c.appendChild(d);d.appendChild(k);b.a.push(d);Cb(f,p,h);La(d,"tvs-annotate-element",!0);(function(a,b){setTimeout(function(){a.style.width=
b.style.width},10)})(d,k)}}};function Eb(a,b,c,d){var f=r(b)?b:[b],g="tvs-"+a.id;Fb(a,b);A(f,function(b){b["_"+a.id+"_info"]={type:c,color:d,a:[]};La(b,g,!0);a.s(b)})}function Fb(a,b){var c="tvs-"+a.id;A(r(b)?b:[b],function(b){var f=b["_"+a.id+"_info"];f&&(delete b["_"+a.id+"_info"],La(b,c,!1),A(f.a,Wa))})}
function Db(a,b,c){var d=L("table"),f=L("tr");d.appendChild(f);var g=0,e=a.v;A(e,function(a){"*"===a.width&&g++});var h=100*g/e.length,k;A(e,function(a,d){var g=L("td");fb(a,g,k,c,d,e.length,b,h);f.appendChild(g);k=g});return d}function Cb(a,b,c){a=a.v;var d=Ra("td",null,b);A(a,function(a,b){a.t(d[b],c)})};function Z(){this.A=new Y("underliner",S,Za);this.p=new Y("highlighter",S,$a);this.u=new Y("striker",S,ab)}w("tvs.Annotator",Z);Z.getTemplates=function(){return S};Z.prototype.S=function(a){K(this.A.options,a);return this};Z.prototype.setUnderlineOptions=Z.prototype.S;Z.prototype.Q=function(a){K(this.p.options,a);return this};Z.prototype.setHighlightOptions=Z.prototype.Q;Z.prototype.R=function(a){K(this.u.options,a);return this};Z.prototype.setStrikeOptions=Z.prototype.R;Z.prototype.G=function(){return S};
Z.prototype.getTemplates=Z.prototype.G;Z.prototype.W=function(a,b,c){Eb(this.A,a,b,c);return this};Z.prototype.underline=Z.prototype.W;Z.prototype.I=function(a,b,c){Eb(this.p,a,b,c);return this};Z.prototype.highlight=Z.prototype.I;Z.prototype.strike=function(a,b,c){Eb(this.u,a,b,c);return this};Z.prototype.strike=Z.prototype.strike;
function Gb(a,b,c,d){if("undefined"===typeof rangy)throw Error("Rangy Framework is not found");var f=rangy.getSelection(),g=a[b];a.l||(rangy.init(),a.l=rangy.createCssClassApplier("tvs-annotated-text"));a.l.applyToSelection();var e=[];A(f.getAllRanges(),function(b){A(b.getNodes(),function(b){b=a.l.getSelfOrAncestorWithClass(b);var f;if(f=b)f=Ha(b),f=0<=z(f,"tvs-annotated-text")&&!(0<=z(e,b));f&&(e.push(b),g.apply(a,[b,c,d]))})});return a}Z.prototype.X=function(a,b){return Gb(this,"underline",a,b)};
Z.prototype.underlineSelected=Z.prototype.X;Z.prototype.J=function(a,b){return Gb(this,"highlight",a,b)};Z.prototype.highlightSelected=Z.prototype.J;Z.prototype.T=function(a,b){return Gb(this,"strike",a,b)};Z.prototype.strikeSelected=Z.prototype.T;})();
