(function(){var l,n=this;
function p(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function s(a){return"array"==p(a)}function aa(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function u(a){return a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function v(a,b,c){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return v.apply(null,arguments)}
function w(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function x(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c};function ga(a){if(!ha.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(ia,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(ja,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(ka,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(la,"\x26quot;"));return a}var ia=/&/g,ja=/</g,ka=/>/g,la=/\"/g,ha=/[&<>\"]/;var y=Array.prototype,z=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},ma=y.filter?function(a,b,c){return y.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,f=t(a)?
a.split(""):a,h=0;h<d;h++)if(h in f){var k=f[h];b.call(c,k,h,a)&&(e[g++]=k)}return e};function na(a,b){var c=z(a,b),d;(d=0<=c)&&y.splice.call(a,c,1);return d}function oa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function pa(a,b,c){return 2>=arguments.length?y.slice.call(a,b):y.slice.call(a,b,c)};var B,qa,ra,sa;function ta(){return n.navigator?n.navigator.userAgent:null}sa=ra=qa=B=!1;var C;if(C=ta()){var ua=n.navigator;B=0==C.lastIndexOf("Opera",0);qa=!B&&(-1!=C.indexOf("MSIE")||-1!=C.indexOf("Trident"));ra=!B&&-1!=C.indexOf("WebKit");sa=!B&&!ra&&!qa&&"Gecko"==ua.product}var D=B,E=qa,F=sa,G=ra,va=n.navigator,wa=-1!=(va&&va.platform||"").indexOf("Mac");function xa(){var a=n.document;return a?a.documentMode:void 0}var ya;
a:{var za="",H;if(D&&n.opera)var Aa=n.opera.version,za="function"==typeof Aa?Aa():Aa;else if(F?H=/rv\:([^\);]+)(\)|;)/:E?H=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:G&&(H=/WebKit\/(\S+)/),H)var Ba=H.exec(ta()),za=Ba?Ba[1]:"";if(E){var Ca=xa();if(Ca>parseFloat(za)){ya=String(Ca);break a}}ya=za}var Da={};
function I(a){var b;if(!(b=Da[a])){b=0;for(var c=String(ya).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var f=c[g]||"",h=d[g]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var r=k.exec(f)||["","",""],q=m.exec(h)||["","",""];if(0==r[0].length&&0==q[0].length)break;b=((0==r[1].length?0:parseInt(r[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==r[1].length?0:parseInt(r[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==r[2].length)<(0==q[2].length)?-1:(0==r[2].length)>(0==q[2].length)?1:0)||(r[2]<q[2]?-1:r[2]>q[2]?1:0)}while(0==b)}b=Da[a]=0<=b}return b}var Ea=n.document,J=Ea&&E?xa()||("CSS1Compat"==Ea.compatMode?parseInt(ya,10):5):void 0;var Fa,Ga=!E||E&&9<=J;!F&&!E||E&&E&&9<=J||F&&I("1.9.1");E&&I("9");var Ha=E||D||G;function Ia(a){a=a.className;return t(a)&&a.match(/\S+/g)||[]}function Ja(a,b){for(var c=Ia(a),d=pa(arguments,1),e=c.length+d.length,g=c,f=0;f<d.length;f++)0<=z(g,d[f])||g.push(d[f]);a.className=c.join(" ");return c.length==e}function Ka(a,b){var c=Ia(a),d=pa(arguments,1),c=La(c,d);a.className=c.join(" ")}function La(a,b){return ma(a,function(a){return!(0<=z(b,a))})}function Ma(a,b,c){c?Ja(a,b):Ka(a,b)};function Na(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}Na.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Oa(a,b){this.width=a;this.height=b}Oa.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};function Pa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Qa(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ra="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Ra.length;g++)c=Ra[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Sa(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,f;f=c[g];g++)a==f.nodeName&&(d[e++]=f);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;f=c[g];g++)a=f.className,"function"==typeof a.split&&0<=z(a.split(/\s+/),b)&&(d[e++]=f);d.length=e;return d}return c}
function Ta(a,b){Pa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ua?a.setAttribute(Ua[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ua={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function L(a,b,c){var d=arguments,e=document,g=d[0],f=d[1];if(!Ga&&f&&(f.name||f.type)){g=["\x3c",g];f.name&&g.push(' name\x3d"',ga(f.name),'"');if(f.type){g.push(' type\x3d"',ga(f.type),'"');var h={};K(h,f);delete h.type;f=h}g.push("\x3e");g=g.join("")}g=e.createElement(g);f&&(t(f)?g.className=f:s(f)?Ja.apply(null,[g].concat(f)):Ta(g,f));2<d.length&&Va(e,g,d);return g}
function Va(a,b,c){function d(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var g=c[e];if(!aa(g)||ba(g)&&0<g.nodeType)d(g);else{var f;a:{if(g&&"number"==typeof g.length){if(ba(g)){f="function"==typeof g.item||"string"==typeof g.item;break a}if("function"==p(g)){f="function"==typeof g.item;break a}}f=!1}A(f?oa(g):g,d)}}}function Wa(a,b){a.appendChild(b)}function Xa(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Ya(a){if(Ha&&!(E&&I("9")&&!I("10")&&n.SVGElement&&a instanceof n.SVGElement))return a.parentElement;a=a.parentNode;return ba(a)&&1==a.nodeType?a:null}function M(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function N(a){this.e=a||n.document||document}N.prototype.createElement=function(a){return this.e.createElement(a)};N.prototype.createTextNode=function(a){return this.e.createTextNode(String(a))};N.prototype.appendChild=Wa;function Za(a,b){return a.replace(/{([0-9a-zA-Z]+)}/g,function(a,d){return"undefined"!=typeof b[d]?b[d]:a})}var $a={},ab={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.bottom-0.1*a.height}}},bb={g:function(a){return{width:a.width,height:a.height,left:a.left,top:a.top}}},cb={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.top+(a.height-b)/2}}};
function db(){if(null!=window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var a=window.document;return"CSS1Compat"===document.compatMode?{x:a.documentElement.scrollLeft,y:a.documentElement.scrollTop}:{x:a.body.scrollLeft,y:a.body.scrollTop}};var eb=null,fb=F||G||D||"function"==typeof n.atob;function gb(){};function O(a,b){this.content=a;this.width=b}x(O,gb);w("tvs.ImageTemplatePart",O);O.prototype.f=function(a){return Za(this.content,[a])};
function hb(a,b,c,d,e,g,f,h){var k=!1,m=a.width.split(" ");switch(m[0]){case "*":b.style.width=h+"%";break;case "repeat":b.style.width="auto";Wa(b,L("div"));break;case "height":b.style.width=d.height;b.style.maxWidth=d.height;break;case "swag":if(!c)throw Error("Swag part can not be the first");b.style.display="none";h=L("img");m[1]&&(h.style.display="none",h.onload=function(){this.style.height=d.height/+m[1]*this.height;this.style.display=""});h.src=a.f(f);h.style.left=100*e/g+"%";c.appendChild(h);
k=!0;break;case "stretch":h=L("img");h.src=a.f(f);b.appendChild(h);h.removeAttribute("width");h.removeAttribute("height");k=!0;break;default:b.style.width="number"==typeof a.width?a.width+"px":a.width}k||(b.style.backgroundImage='url("'+a.f(f)+'")',b.style.backgroundSize="auto 100%")}O.prototype.t=function(){};function P(a,b,c,d){a=Za('\x3csvg width\x3d"{0}" height\x3d"{1}" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg\x3e\n{2}\n\x3c/g\x3e\n\x3c/svg\x3e',[b,c,a]);O.call(this,a,d);this.D=b;this.C=c}x(P,O);w("tvs.SvgTemplatePart",P);
P.prototype.f=function(a){var b=Za(this.content,[a]);if(fb)a=n.btoa(b);else{a=[];for(var c=0,d=0;d<b.length;d++){for(var e=b.charCodeAt(d);255<e;)a[c++]=e&255,e>>=8;a[c++]=e}if(!aa(a))throw Error("encodeByteArray takes an array as a parameter");if(!eb)for(eb={},b=0;65>b;b++)eb[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(b);b=eb;c=[];for(d=0;d<a.length;d+=3){var g=a[d],f=(e=d+1<a.length)?a[d+1]:0,h=d+2<a.length,k=h?a[d+2]:0,m=g>>2,g=(g&3)<<4|f>>4,f=(f&15)<<2|k>>
6,k=k&63;h||(k=64,e||(f=64));c.push(b[m],b[g],b[f],b[k])}a=c.join("")}return"data:image/svg+xml;base64,"+a};
P.prototype.t=function(a,b){if("stretch"===this.width){var c,d=M(a),e=Q(a,"position"),g=F&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),f=new Na(0,0),h;c=d?M(d):document;(h=!E)||(h=E&&9<=J)||(h="CSS1Compat"==(c?new N(M(c)):Fa||(Fa=new N)).e.compatMode);h=h?c.documentElement:c.body;if(a!=h)if(a.getBoundingClientRect)c=ib(a),e=(d?new N(M(d)):Fa||(Fa=new N)).e,d=G||"CSS1Compat"!=e.compatMode?e.body:e.documentElement,e=e.parentWindow||
e.defaultView,d=E&&I("10")&&e.pageYOffset!=d.scrollTop?new Na(d.scrollLeft,d.scrollTop):new Na(e.pageXOffset||d.scrollLeft,e.pageYOffset||d.scrollTop),f.x=c.left+d.x,f.y=c.top+d.y;else if(d.getBoxObjectFor&&!g)c=d.getBoxObjectFor(a),d=d.getBoxObjectFor(h),f.x=c.screenX-d.screenX,f.y=c.screenY-d.screenY;else{c=a;do{f.x+=c.offsetLeft;f.y+=c.offsetTop;c!=a&&(f.x+=c.clientLeft||0,f.y+=c.clientTop||0);if(G&&"fixed"==Q(c,"position")){f.x+=d.body.scrollLeft;f.y+=d.body.scrollTop;break}c=c.offsetParent}while(c&&
c!=a);if(D||G&&"absolute"==e)f.y-=d.body.offsetTop;for(c=a;(c=jb(c))&&c!=d.body&&c!=h;)f.x-=c.scrollLeft,D&&"TR"==c.tagName||(f.y-=c.scrollTop)}f=kb;"none"!=Q(a,"display")?f(a):(c=a.style,d=c.display,e=c.visibility,g=c.position,c.visibility="hidden",c.position="absolute",c.display="inline",f(a),c.display=d,c.position=g,c.visibility=e);f=Sa("img",null,a)[0];f.style.transform="scaleX("+b.width/this.D+") scaleY("+b.height/this.C+")";f.style.webkitTransform=f.style.msTransform=f.style.transform}};function R(a){this.v=t(a)?[new O(a,"repeat")]:s(a)?a:[a]}w("tvs.Template",R);var S={squiggly:new R(new P('\x3cline y2\x3d"16.00" x2\x3d"20" y1\x3d"4.00" x1\x3d"10" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4.00" x2\x3d"10" y1\x3d"16.00" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),solid:new R(new P('\x3cline y2\x3d"5" x2\x3d"20" y1\x3d"5" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),dotted:new R(new P('\x3cline y2\x3d"3" x2\x3d"4" y1\x3d"3" x1\x3d"0" stroke-dasharray\x3d"2, 2" stroke-width\x3d"2" stroke\x3d"{0}" fill\x3d"none"/\x3e',
4,5,"repeat")),dashed:new R(new P('\x3cline y2\x3d"5" x2\x3d"20" y1\x3d"5" x1\x3d"0" stroke-dasharray\x3d"10, 10" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),"double":new R(new P('\x3cline y2\x3d"1" x2\x3d"5" y1\x3d"1" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4" x2\x3d"5" y1\x3d"4" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e',5,5,"repeat")),combined:new R([new P('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',
10,10,"height"),new P('\x3cline y2\x3d"5" x2\x3d"10" y1\x3d"5" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}"/\x3e',10,10,"repeat"),new P('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',10,10,"height")])};w("tvs.AnnotatorDictionary.svgTemplates",S);function lb(){0!=mb&&(this.Y=Error().stack,u(this))}var mb=0;var nb=!E||E&&9<=J,ob=E&&!I("9");!G||I("528");F&&I("1.9b")||E&&I("8")||D&&I("9.5")||G&&I("528");F&&!I("8")||E&&I("9");function T(a,b){this.type=a;this.currentTarget=this.target=b}T.prototype.k=!1;T.prototype.defaultPrevented=!1;T.prototype.P=!0;T.prototype.preventDefault=function(){this.defaultPrevented=!0;this.P=!1};function pb(a){pb[" "](a);return a}pb[" "]=function(){};function U(a,b){a&&this.init(a,b)}x(U,T);l=U.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.N=!1;l.o=null;
l.init=function(a,b){var c=this.type=a.type;T.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(F){var e;a:{try{pb(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=G||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=G||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.N=wa?a.metaKey:a.ctrlKey;this.state=a.state;this.o=a;a.defaultPrevented&&this.preventDefault();delete this.k};
l.preventDefault=function(){U.U.preventDefault.call(this);var a=this.o;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ob)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qb="closure_listenable_"+(1E6*Math.random()|0),rb=0;function sb(a,b,c,d,e,g){this.c=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.i=g;this.key=++rb;this.d=this.h=!1}function tb(a){a.d=!0;a.c=null;a.proxy=null;a.src=null;a.i=null};var ub={},V={},W={},X={};
function vb(a,b,c,d,e){if(s(b))for(var g=0;g<b.length;g++)vb(a,b[g],c,d,e);else if(c=wb(c),a&&a[qb])a.F.add(b,c,!1,d,e);else a:{if(!b)throw Error("Invalid event type");d=!!d;var f=V;b in f||(f[b]={b:0});f=f[b];d in f||(f[d]={b:0},f.b++);var f=f[d],g=u(a),h;if(f[g]){h=f[g];for(var k=0;k<h.length;k++)if(f=h[k],f.c==c&&f.i==e){if(f.d)break;h[k].h=!1;break a}}else h=f[g]=[],f.b++;k=xb();f=new sb(c,k,a,b,d,e);f.h=!1;k.src=a;k.c=f;h.push(f);W[g]||(W[g]=[]);W[g].push(f);a.addEventListener?a.addEventListener(b,
k,d):a.attachEvent(b in X?X[b]:X[b]="on"+b,k);ub[f.key]=f}}function xb(){var a=yb,b=nb?function(c){return a.call(b.src,b.c,c)}:function(c){c=a.call(b.src,b.c,c);if(!c)return c};return b}function zb(a,b,c){var d=1;b=u(b);if(a[b])for(a=oa(a[b]),b=0;b<a.length;b++){var e=a[b];e&&!e.d&&(d&=!1!==Ab(e,c))}return Boolean(d)}
function Ab(a,b){var c=a.c,d=a.i||a.src;if(a.h&&"number"!=typeof a&&a&&!a.d){var e=a.src;if(e&&e[qb]){var g=e.F,f=a.type;f in g.j&&na(g.j[f],a)&&(tb(a),0==g.j[f].length&&(delete g.j[f],g.Z--))}else{var g=a.type,h=a.proxy,f=a.capture;e.removeEventListener?e.removeEventListener(g,h,f):e.detachEvent&&e.detachEvent(g in X?X[g]:X[g]="on"+g,h);e=u(e);W[e]&&(h=W[e],na(h,a),0==h.length&&delete W[e]);tb(a);if(h=V[g][f][e])na(h,a),0==h.length&&(delete V[g][f][e],V[g][f].b--),0==V[g][f].b&&(delete V[g][f],V[g].b--),
0==V[g].b&&delete V[g];delete ub[a.key]}}return c.call(d,b)}
function yb(a,b){if(a.d)return!0;var c=a.type,d=V;if(!(c in d))return!0;var d=d[c],e,g;if(!nb){if(!(c=b))a:{for(var c=["window","event"],f=n;e=c.shift();)if(null!=f[e])f=f[e];else{c=null;break a}c=f}e=c;c=!0 in d;f=!1 in d;if(c){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var h=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==e.returnValue)e.returnValue=!0}}h=new U;h.init(e,this);e=!0;try{if(c){for(var m=[],r=h.currentTarget;r;r=r.parentNode)m.push(r);g=d[!0];for(var q=
m.length-1;!h.k&&0<=q;q--)h.currentTarget=m[q],e&=zb(g,m[q],h);if(f)for(g=d[!1],q=0;!h.k&&q<m.length;q++)h.currentTarget=m[q],e&=zb(g,m[q],h)}else e=Ab(a,h)}finally{m&&(m.length=0)}return e}d=new U(b,this);return e=Ab(a,d)}var Bb="__closure_events_fn_"+(1E9*Math.random()>>>0);function wb(a){return"function"==p(a)?a:a[Bb]||(a[Bb]=function(b){return a.handleEvent(b)})};function Cb(a,b,c){lb.call(this);this.L=a;this.K=b;this.H=c;this.B=v(this.M,this)}x(Cb,lb);l=Cb.prototype;l.m=!1;l.q=0;l.n=null;l.fire=function(){this.n||this.q?this.m=!0:Db(this)};l.M=function(){this.n=null;this.m&&!this.q&&(this.m=!1,Db(this))};function Db(a){var b;b=a.B;var c=a.K;if("function"!=p(b))if(b&&"function"==typeof b.handleEvent)b=v(b.handleEvent,b);else throw Error("Invalid listener argument");b=2147483647<c?-1:n.setTimeout(b,c||0);a.n=b;a.L.call(a.H)};function Eb(a,b){var c=M(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Q(a,b){return Eb(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function ib(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function jb(a){if(E&&!(E&&8<=J))return a.offsetParent;var b=M(a),c=Q(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Q(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function kb(a){var b=a.offsetWidth,c=a.offsetHeight,d=G&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=ib(a),new Oa(a.right-a.left,a.bottom-a.top)):new Oa(b,c)};function Y(a,b,c,d){this.id=a||"annotator";this.r=c;this.V=b;this.options={height:5};K(this.options,d||this.options);this.w=new Cb(v(this.O,this),50);a=this.id;b=v(this.w.fire,this.w);"undefined"===typeof $a[a]&&($a[a]=b,vb(window,"resize",b))}Y.prototype.O=function(){var a;a="tvs-"+this.id;var b=document;a=b.querySelectorAll&&b.querySelector?b.querySelectorAll("."+a):b.getElementsByClassName?b.getElementsByClassName(a):Sa("*",a,void 0);b=v(this.s,this);A(a,b)};
Y.prototype.s=function(a){a.target&&(a=a.srcElement);var b=a["_"+this.id+"_info"];if(b){for(var c=Ya(a),d=a.getClientRects(),e=Math.min(d.length,b.a.length),g=this.V[b.type],f=db().y,h=0;h<e;h++){var k=Qa(d[h]);k.top+=f;k.bottom+=f;"undefined"===typeof k.width&&(k.width=k.right-k.left,k.height=k.bottom-k.top);var k=this.r.g(k,this.options.height),m=b.a[h].style;m.width=k.width+"px";m.left=k.left+"px";m.top=k.top+"px";Fb(g,b.a[h],k)}for(h=e;h<b.a.length;h++)Xa(b.a[h]);for(h=b.a.length=e;h<d.length;h++){k=
Qa(d[h]);k.top+=f;k.bottom+=f;"undefined"===typeof k.width&&(k.width=k.right-k.left,k.height=k.bottom-k.top);e=L("div");e.style.position="absolute";var m=L("div"),k=this.r.g(k,this.options.height),r=Gb(g,b.color,k);m.appendChild(r);e.style.height=m.style.height=k.height+"px";e.style.width=0;m.style.width=k.width+"px";e.style.left=k.left+"px";e.style.top=k.top+"px";var q=Eb(a,"zIndex");e.style.zIndex="number"==typeof q?q-1:-1;c.appendChild(e);e.appendChild(m);b.a.push(e);Fb(g,r,k);Ma(e,"tvs-annotate-element",
!0);(function(a,b){setTimeout(function(){a.style.width=b.style.width},10)})(e,m)}}};function Hb(a,b,c,d){var e=s(b)?b:[b],g="tvs-"+a.id;Ib(a,b);A(e,function(b){b["_"+a.id+"_info"]={type:c,color:d,a:[]};Ma(b,g,!0);a.s(b)})}function Ib(a,b){var c="tvs-"+a.id;A(s(b)?b:[b],function(b){var e=b["_"+a.id+"_info"];e&&(delete b["_"+a.id+"_info"],Ma(b,c,!1),A(e.a,Xa))})}
function Gb(a,b,c){var d=L("table"),e=L("tr");d.appendChild(e);var g=0,f=a.v;A(f,function(a){"*"===a.width&&g++});var h=100*g/f.length,k;A(f,function(a,d){var g=L("td");hb(a,g,k,c,d,f.length,b,h);e.appendChild(g);k=g});return d}function Fb(a,b,c){a=a.v;var d=Sa("td",null,b);A(a,function(a,b){a.t(d[b],c)})};function Z(){this.A=new Y("underliner",S,ab);this.p=new Y("highlighter",S,bb);this.u=new Y("striker",S,cb)}w("tvs.Annotator",Z);Z.getTemplates=function(){return S};Z.prototype.S=function(a){K(this.A.options,a);return this};Z.prototype.setUnderlineOptions=Z.prototype.S;Z.prototype.Q=function(a){K(this.p.options,a);return this};Z.prototype.setHighlightOptions=Z.prototype.Q;Z.prototype.R=function(a){K(this.u.options,a);return this};Z.prototype.setStrikeOptions=Z.prototype.R;Z.prototype.G=function(){return S};
Z.prototype.getTemplates=Z.prototype.G;Z.prototype.W=function(a,b,c){Hb(this.A,a,b,c);return this};Z.prototype.underline=Z.prototype.W;Z.prototype.I=function(a,b,c){Hb(this.p,a,b,c);return this};Z.prototype.highlight=Z.prototype.I;Z.prototype.strike=function(a,b,c){Hb(this.u,a,b,c);return this};Z.prototype.strike=Z.prototype.strike;
function Jb(a,b,c,d){if("undefined"===typeof rangy)throw Error("Rangy Framework is not found");var e=rangy.getSelection(),g=a[b];a.l||(rangy.init(),a.l=rangy.createCssClassApplier("tvs-annotated-text"));a.l.applyToSelection();var f=[];A(e.getAllRanges(),function(b){A(b.getNodes(),function(b){b=a.l.getSelfOrAncestorWithClass(b);var e;if(e=b)e=Ia(b),e=0<=z(e,"tvs-annotated-text")&&!(0<=z(f,b));e&&(f.push(b),g.apply(a,[b,c,d]))})});return a}Z.prototype.X=function(a,b){return Jb(this,"underline",a,b)};
Z.prototype.underlineSelected=Z.prototype.X;Z.prototype.J=function(a,b){return Jb(this,"highlight",a,b)};Z.prototype.highlightSelected=Z.prototype.J;Z.prototype.T=function(a,b){return Jb(this,"strike",a,b)};Z.prototype.strikeSelected=Z.prototype.T;})();
